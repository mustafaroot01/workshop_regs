import{_ as F,w as N,o as B,c as r,a as t,b as i,d as T,e as $,T as D,u as O,r as g,f as R,g as L,h as a,t as d,i as A,j as u,n as p,v as h,k,l as E,F as X,m as S,p as G,q as H}from"./index-PQiJXDhb.js";import{g as J,r as K}from"./api-jdT4XKC_.js";const P={class:"page reg-page"},Q={class:"container reg-container"},W={key:0,class:"center-screen"},Y={key:1,class:"center-screen"},Z={key:0,class:"reg-card card"},ee={class:"reg-header"},te={class:"reg-logo"},se=["src"],oe={style:{"font-size":"1.1rem",color:"var(--primary)","margin-bottom":"0.5rem","font-weight":"600"}},le={key:0,class:"reg-desc"},re={class:"form-grid"},ae={class:"form-group full-width"},ne={key:0,class:"form-error"},ie={class:"form-group"},de={class:"gender-grid"},ue={key:0,class:"form-error"},pe={class:"form-group"},me={class:"gender-grid"},fe={key:0,class:"form-error"},ve={class:"form-group"},ge={key:0,class:"form-error"},ye={key:0,class:"form-group full-width"},ce=["value"],_e={key:0,class:"form-error"},be={class:"form-group"},he={class:"form-group"},ke={key:0,class:"form-error"},xe={key:1,class:"form-group full-width"},we={class:"pill-grid"},Ve=["id","value"],Ue=["for"],Xe={class:"form-group full-width"},Ie={key:2,class:"full-width"},ze={class:"alert alert-error"},Me={class:"form-group full-width"},Re=["disabled"],Ee={key:0,class:"spinner"},Se={key:1},je={__name:"RegisterView",setup(qe){const x=O(),j=L(),w=g(!0),V=g(!1),_=g(!1),b=g(""),m=g(null),I=g([]),z=g([]),s=R({name:"",gender:"",email:"",phone:"",stage:"",study_type:"",department_id:"",interests:[],description:""}),l=R({}),M=H(()=>s.department_id?z.value.filter(n=>n.department_id===s.department_id):[]);N(()=>s.department_id,()=>{s.interests=[]}),B(async()=>{try{const{data:n}=await J(x.params.formId);m.value=n.form,I.value=n.departments,z.value=n.interests,m.value.department_id&&(s.department_id=m.value.department_id)}catch{V.value=!0}finally{w.value=!1}});function q(){Object.keys(l).forEach(e=>delete l[e]);let n=!0;return(!s.name.trim()||s.name.trim().split(" ").length<2)&&(l.name="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ ÙƒØ§Ù…Ù„Ø§Ù‹.",n=!1),s.gender||(l.gender="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ù†Ø³.",n=!1),s.study_type||(l.study_type="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯Ø±Ø§Ø³Ø©.",n=!1),s.stage||(l.stage="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø±Ø­Ù„Ø©.",n=!1),s.department_id||(l.department_id="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù….",n=!1),!s.email&&!s.phone&&(l.contact="ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.",n=!1),n}async function C(){var n,e,y,c;if(q()){_.value=!0,b.value="";try{const v={...s,stage:Number(s.stage)},{data:f}=await K(x.params.formId,v);j.push({name:"RegisterSuccess",params:{formId:x.params.formId},query:{name:f.student.name,qr:f.qr_token}})}catch(v){const f=(e=(n=v.response)==null?void 0:n.data)==null?void 0:e.errors;f?Object.entries(f).forEach(([o,U])=>{l[o]=U[0]}):b.value=((c=(y=v.response)==null?void 0:y.data)==null?void 0:c.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¬Ø¯Ø¯Ø§Ù‹."}finally{_.value=!1}}}return(n,e)=>(a(),r("div",P,[t("div",Q,[w.value?(a(),r("div",W,[...e[12]||(e[12]=[t("div",{class:"spinner",style:{width:"48px",height:"48px","border-width":"4px"}},null,-1),t("p",{style:{"margin-top":"1rem",color:"var(--text-2)"}},"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©...",-1)])])):V.value?(a(),r("div",Y,[...e[13]||(e[13]=[t("div",{style:{"font-size":"4rem"}},"ğŸ”’",-1),t("h2",{style:{"margin-top":"1rem",color:"var(--error)"}},"ØªÙ… ØºÙ„Ù‚ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„",-1),t("p",{style:{color:"var(--text-2)","margin-top":"0.5rem"}},"Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… ÙŠØ¹Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ§Ø­Ø§Ù‹ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.",-1)])])):i("",!0),T(D,{name:"slide-up",appear:""},{default:$(()=>{var y,c,v,f;return[!w.value&&!V.value?(a(),r("div",Z,[t("div",ee,[t("div",te,[t("img",{src:((y=m.value)==null?void 0:y.logo_url)||"/logo.png",alt:"Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø±ÙƒØ²",style:{width:"100%",height:"100%","object-fit":"contain","border-radius":"50%","box-shadow":"0 4px 15px rgba(0,0,0,0.1)"},onerror:"this.src='/logo.png'"},null,8,se)]),e[14]||(e[14]=t("h1",{class:"gradient-text",style:{"font-size":"2rem","margin-bottom":"0.2rem","line-height":"1.4"}},"Ù…Ø±ÙƒØ² Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù…Ø³ØªÙ…Ø±",-1)),e[15]||(e[15]=t("h2",{style:{"font-size":"1.2rem",color:"var(--text-2)","margin-bottom":"0.5rem"}},"Ø¬Ø§Ù…Ø¹Ø© Ø¨Ù„Ø§Ø¯ Ø§Ù„Ø±Ø§ÙØ¯ÙŠÙ†",-1)),t("h3",oe,d((c=m.value)==null?void 0:c.title),1),(v=m.value)!=null&&v.description?(a(),r("p",le,d(m.value.description),1)):i("",!0),e[16]||(e[16]=t("div",{class:"reg-divider"},null,-1))]),t("form",{onSubmit:A(C,["prevent"]),novalidate:""},[t("div",re,[t("div",ae,[e[17]||(e[17]=t("label",{class:"form-label"},"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ *",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),type:"text",class:p(["form-input",{error:l.name}]),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„"},null,2),[[h,s.name]]),l.name?(a(),r("span",ne,d(l.name),1)):i("",!0)]),t("div",ie,[e[20]||(e[20]=t("label",{class:"form-label"},"Ø§Ù„Ø¬Ù†Ø³ *",-1)),t("div",de,[t("label",{class:p(["gender-option",{active:s.gender==="male"}])},[u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.gender=o),type:"radio",value:"male",hidden:""},null,512),[[k,s.gender]]),e[18]||(e[18]=t("span",null,"ğŸ‘¨ Ø°ÙƒØ±",-1))],2),t("label",{class:p(["gender-option",{active:s.gender==="female"}])},[u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.gender=o),type:"radio",value:"female",hidden:""},null,512),[[k,s.gender]]),e[19]||(e[19]=t("span",null,"ğŸ‘© Ø£Ù†Ø«Ù‰",-1))],2)]),l.gender?(a(),r("span",ue,d(l.gender),1)):i("",!0)]),t("div",pe,[e[23]||(e[23]=t("label",{class:"form-label"},"Ø§Ù„Ø¯Ø±Ø§Ø³Ø© *",-1)),t("div",me,[t("label",{class:p(["gender-option",{active:s.study_type==="morning"}])},[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.study_type=o),type:"radio",value:"morning",hidden:""},null,512),[[k,s.study_type]]),e[21]||(e[21]=t("span",null,"â˜€ï¸ ØµØ¨Ø§Ø­ÙŠ",-1))],2),t("label",{class:p(["gender-option",{active:s.study_type==="evening"}])},[u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.study_type=o),type:"radio",value:"evening",hidden:""},null,512),[[k,s.study_type]]),e[22]||(e[22]=t("span",null,"ğŸŒ™ Ù…Ø³Ø§Ø¦ÙŠ",-1))],2)]),l.study_type?(a(),r("span",fe,d(l.study_type),1)):i("",!0)]),t("div",ve,[e[25]||(e[25]=t("label",{class:"form-label"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *",-1)),u(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.stage=o),class:p(["form-select",{error:l.stage}])},[...e[24]||(e[24]=[t("option",{value:"",disabled:""},"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©",-1),t("option",{value:"1"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",-1),t("option",{value:"2"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",-1),t("option",{value:"3"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©",-1),t("option",{value:"4"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©",-1)])],2),[[E,s.stage]]),l.stage?(a(),r("span",ge,d(l.stage),1)):i("",!0)]),(f=m.value)!=null&&f.department_id?i("",!0):(a(),r("div",ye,[e[27]||(e[27]=t("label",{class:"form-label"},"Ø§Ù„Ù‚Ø³Ù… *",-1)),u(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.department_id=o),class:p(["form-select",{error:l.department_id}])},[e[26]||(e[26]=t("option",{value:"",disabled:""},"Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…",-1)),(a(!0),r(X,null,S(I.value,o=>(a(),r("option",{key:o.id,value:o.id},d(o.name),9,ce))),128))],2),[[E,s.department_id]]),l.department_id?(a(),r("span",_e,d(l.department_id),1)):i("",!0)])),t("div",be,[e[28]||(e[28]=t("label",{class:"form-label"},"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.email=o),type:"email",class:p(["form-input",{error:l.contact}]),placeholder:"example@email.com"},null,2),[[h,s.email]])]),t("div",he,[e[29]||(e[29]=t("label",{class:"form-label"},"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",-1)),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.phone=o),type:"tel",class:p(["form-input",{error:l.contact}]),onInput:e[9]||(e[9]=o=>s.phone=s.phone.replace(/[^0-9]/g,"")),placeholder:"07XXXXXXXXX"},null,34),[[h,s.phone]]),l.contact?(a(),r("span",ke,d(l.contact),1)):i("",!0)]),s.department_id&&M.value.length?(a(),r("div",xe,[e[30]||(e[30]=t("label",{class:"form-label"},"Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª",-1)),t("div",we,[(a(!0),r(X,null,S(M.value,o=>(a(),r(X,{key:o.id},[u(t("input",{type:"checkbox",class:"pill-item",id:`int-${o.id}`,value:o.id,"onUpdate:modelValue":e[10]||(e[10]=U=>s.interests=U)},null,8,Ve),[[G,s.interests]]),t("label",{for:`int-${o.id}`,class:"pill-label"},d(o.name),9,Ue)],64))),128))])])):i("",!0),t("div",Xe,[e[31]||(e[31]=t("label",{class:"form-label"},"ØªØ­Ø¯Ø« Ø¹Ù† Ù†ÙØ³Ùƒ",-1)),u(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.description=o),class:"form-textarea",placeholder:"Ø£Ø®Ø¨Ø±Ù†Ø§ Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù† Ù†ÙØ³ÙƒØŒ Ø®Ø¨Ø±Ø§ØªÙƒØŒ Ø£Ù‡Ø¯Ø§ÙÙƒ..."},null,512),[[h,s.description]])]),b.value?(a(),r("div",Ie,[t("div",ze,d(b.value),1)])):i("",!0),t("div",Me,[t("button",{type:"submit",class:"btn btn-primary btn-full",disabled:_.value,style:{padding:"1rem","font-size":"1.1rem"}},[_.value?(a(),r("span",Ee)):(a(),r("span",Se,"âœ¨ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©"))],8,Re)])])],32)])):i("",!0)]}),_:1})])]))}},Ne=F(je,[["__scopeId","data-v-e575da17"]]);export{Ne as default};
