import{_ as N,r as i,o as I,c as o,a as e,b as a,F as S,l as h,d as _,e as g,T as $,z as K,g as l,n as L,t as d,y as U,s as u,h as V,i as D,A as E,v as T}from"./index-QrAWjh4S.js";import{d as O,u as R,e as j,f as q}from"./api-Cwew99rJ.js";const G={class:"page-header"},H={key:0,style:{"text-align":"center",padding:"4rem"}},J={key:1},P={key:0,class:"empty-state container card",style:{"margin-top":"2rem"}},Q={class:"forms-grid"},W={class:"card-top"},X={key:0,class:"card-mgmt"},Y=["onClick","title"],Z=["onClick"],tt={class:"card-main"},et={class:"card-info"},st={class:"card-title"},lt={key:0,class:"card-desc"},nt={class:"card-stat-box"},ot={class:"stat-num"},at={class:"card-actions"},it=["onClick","title"],rt={class:"link-val"},dt={class:"link-url"},ut={class:"link-copy-icon"},mt={class:"modal card",style:{"max-width":"380px","text-align":"center"}},vt={style:{color:"var(--text-3)","margin-top":"0.5rem","line-height":"1.6"}},pt={style:{display:"flex",gap:"0.8rem","margin-top":"1.8rem"}},ct=["disabled"],yt={key:0,class:"spinner"},bt={class:"modal card"},gt={class:"form-group",style:{"margin-bottom":"1rem"}},ft={class:"form-group",style:{"margin-bottom":"1.5rem"}},kt={style:{display:"flex",gap:"0.8rem"}},_t=["disabled"],xt={key:0,class:"spinner"},wt={__name:"FormsView",setup(Ct){const p=i(localStorage.getItem("admin_role")||"admin"),f=i([]),x=i(!0),m=i(!1),v=i(""),c=i(""),y=i(!1),r=i(null),b=i(!1);async function k(){try{const{data:n}=await O();f.value=n}finally{x.value=!1}}I(k);async function w(){if(v.value.trim()){y.value=!0;try{await q({title:v.value,description:c.value}),v.value="",c.value="",m.value=!1,await k()}finally{y.value=!1}}}async function z(n){try{const t=!n.is_open;await R(n.id,{is_open:t}),n.is_open=t}catch{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©.")}}function A(n){r.value=n}async function B(){if(r.value){b.value=!0;try{await j(r.value.id),r.value=null,await k()}catch{alert("Ø®Ø·Ø£: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ù„ÙˆØ¬ÙˆØ¯ Ø³Ø¬Ù„Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø§ Ø£Ùˆ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±.")}finally{b.value=!1}}}function M(n){navigator.clipboard.writeText(`${window.location.origin}/register/${n}`),copied.value=n,setTimeout(()=>{copied.value=null},2500)}return(n,t)=>{const C=K("router-link");return l(),o("div",null,[e("div",G,[t[8]||(t[8]=e("div",null,[e("h2",{class:"gradient-text"},"Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª"),e("p",{style:{color:"var(--text-3)","margin-top":"0.3rem","font-size":"0.9rem"}},"Ø¥Ø¯Ø§Ø±Ø© Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„")],-1)),p.value==="admin"?(l(),o("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=s=>m.value=!0)},"+ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©")):a("",!0)]),x.value?(l(),o("div",H,[...t[9]||(t[9]=[e("div",{class:"spinner",style:{width:"40px",height:"40px","border-width":"3px"}},null,-1)])])):(l(),o("div",J,[f.value.length===0?(l(),o("div",P,[t[10]||(t[10]=e("div",{style:{"font-size":"3.5rem"}},"ðŸ“‹",-1)),t[11]||(t[11]=e("h3",{style:{"margin-top":"1rem"}},"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø¨Ø¹Ø¯",-1)),t[12]||(t[12]=e("p",{style:{color:"var(--text-3)","margin-top":"0.5rem"}},"Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø³ØªÙ…Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ø¢Ù†.",-1)),e("button",{class:"btn btn-primary",style:{"margin-top":"1.5rem"},onClick:t[1]||(t[1]=s=>m.value=!0)},"+ Ø£Ù†Ø´Ø¦ Ø§Ø³ØªÙ…Ø§Ø±ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰")])):a("",!0),e("div",Q,[(l(!0),o(S,null,h(f.value,s=>(l(),o("div",{key:s.id,class:"form-card card"},[e("div",W,[e("span",{class:L(["badge",s.is_open?"badge-success":"badge-error"])},d(s.is_open?"Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ø¢Ù†":"Ù…ØºÙ„Ù‚Ø©"),3),p.value==="admin"?(l(),o("div",X,[e("button",{class:"mgmt-btn",onClick:F=>z(s),title:s.is_open?"Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„":"ÙØªØ­ Ø§Ù„ØªØ³Ø¬ÙŠÙ„"},d(s.is_open?"ðŸš«":"âœ…"),9,Y),e("button",{class:"mgmt-btn delete",onClick:F=>A(s),title:"Ø­Ø°Ù Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©"}," ðŸ—‘ ",8,Z)])):a("",!0)]),e("div",tt,[e("div",et,[e("h3",st,d(s.title),1),s.description?(l(),o("p",lt,d(s.description),1)):a("",!0)]),e("div",nt,[e("span",ot,d(s.students_count),1),t[13]||(t[13]=e("span",{class:"stat-label"},"Ù…Ø³Ø¬Ù‘Ù„",-1))])]),e("div",at,[p.value==="admin"?(l(),U(C,{key:0,to:{name:"AdminFormDetail",params:{id:s.id}},class:"btn btn-secondary flex-1"},{default:g(()=>[...t[14]||(t[14]=[u(" Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø§Ø¨ ",-1)])]),_:1},8,["to"])):a("",!0),_(C,{to:{name:"AdminAttendance",params:{formId:s.id}},class:"btn btn-primary flex-1"},{default:g(()=>[...t[15]||(t[15]=[u(" Ù…ÙŽØ³Ø­ Ø§Ù„Ø­Ø¶ÙˆØ± ",-1)])]),_:1},8,["to"])]),p.value==="admin"?(l(),o("div",{key:0,class:"card-link",onClick:F=>M(s.id),title:n.copied===s.id?"ØªÙ… Ø§Ù„Ù†Ø³Ø®!":"Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·"},[t[16]||(t[16]=e("div",{class:"link-label"},"Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ³Ø¬ÙŠÙ„",-1)),e("div",rt,[e("span",dt,"/register/"+d(s.id),1),e("span",ut,d(n.copied===s.id?"âœ…":"ðŸ“‹"),1)])],8,it)):a("",!0)]))),128))])])),_($,{name:"fade"},{default:g(()=>[r.value?(l(),o("div",{key:0,class:"modal-backdrop",onClick:t[3]||(t[3]=V(s=>r.value=null,["self"]))},[e("div",mt,[t[22]||(t[22]=e("div",{style:{"font-size":"3rem","margin-bottom":"1rem"}},"âš ï¸",-1)),t[23]||(t[23]=e("h3",{style:{color:"var(--text-1)"}},"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù",-1)),e("p",vt,[t[17]||(t[17]=u(" Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ",-1)),e("b",null,'"'+d(r.value.title)+'"',1),t[18]||(t[18]=u("ØŸ",-1)),t[19]||(t[19]=e("br",null,null,-1)),t[20]||(t[20]=u(" Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹. ",-1))]),e("div",pt,[e("button",{class:"btn btn-danger",style:{flex:"1"},onClick:B,disabled:b.value},[b.value?(l(),o("span",yt)):a("",!0),t[21]||(t[21]=u(" Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù ",-1))],8,ct),e("button",{class:"btn btn-ghost",style:{flex:"1"},onClick:t[2]||(t[2]=s=>r.value=null)},"Ø¥Ù„ØºØ§Ø¡")])])])):a("",!0)]),_:1}),_($,{name:"fade"},{default:g(()=>[m.value?(l(),o("div",{key:0,class:"modal-backdrop",onClick:t[7]||(t[7]=V(s=>m.value=!1,["self"]))},[e("div",bt,[t[27]||(t[27]=e("h3",{style:{"margin-bottom":"1.5rem"}},"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©",-1)),e("div",gt,[t[24]||(t[24]=e("label",{class:"form-label"},"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ±Ø´Ø© *",-1)),D(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>v.value=s),type:"text",class:"form-input",placeholder:"Ù…Ø«Ø§Ù„: ÙˆØ±Ø´Ø© Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©",autoFocus:"",onKeyup:E(w,["enter"])},null,544),[[T,v.value]])]),e("div",ft,[t[25]||(t[25]=e("label",{class:"form-label"},"ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",-1)),D(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>c.value=s),class:"form-textarea",placeholder:"Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©..."},null,512),[[T,c.value]])]),e("div",kt,[e("button",{class:"btn btn-primary",style:{flex:"1"},onClick:w,disabled:!v.value.trim()||y.value},[y.value?(l(),o("span",xt)):a("",!0),t[26]||(t[26]=u(" Ø­ÙØ¸ ",-1))],8,_t),e("button",{class:"btn btn-ghost",style:{flex:"1"},onClick:t[6]||(t[6]=s=>m.value=!1)},"Ø¥Ù„ØºØ§Ø¡")])])])):a("",!0)]),_:1})])}}},Vt=N(wt,[["__scopeId","data-v-ec8a68ba"]]);export{Vt as default};
