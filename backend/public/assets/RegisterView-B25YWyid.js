import{_ as F,w as N,o as B,c as r,a as t,b as i,d as T,e as $,T as D,u as O,r as f,f as L,g as a,t as d,h as A,i as u,n as p,v as _,j as k,k as z,F as V,l as M,m as G,p as R,q as H}from"./index-ItZyAqaB.js";import{g as J,r as K}from"./api-Cwew99rJ.js";const P={class:"page reg-page"},Q={class:"container reg-container"},W={key:0,class:"center-screen"},Y={key:1,class:"center-screen"},Z={key:0,class:"reg-card card"},ee={class:"reg-header"},te={style:{"font-size":"1.1rem",color:"var(--primary)","margin-bottom":"0.5rem","font-weight":"600"}},se={key:0,class:"reg-desc"},oe={class:"form-grid"},le={class:"form-group full-width"},re={key:0,class:"form-error"},ae={class:"form-group"},ne={class:"gender-grid"},ie={key:0,class:"form-error"},de={class:"form-group"},ue={class:"gender-grid"},pe={key:0,class:"form-error"},me={class:"form-group"},fe={key:0,class:"form-error"},ve={class:"form-group full-width"},ge=["value"],ye={key:0,class:"form-error"},ce={class:"form-group"},be={class:"form-group"},_e={key:0,class:"form-error"},ke={key:0,class:"form-group full-width"},he={class:"pill-grid"},xe=["id","value"],we=["for"],Ve={class:"form-group full-width"},Ue={key:1,class:"full-width"},Xe={class:"alert alert-error"},Ie={class:"form-group full-width"},ze=["disabled"],Me={key:0,class:"spinner"},Re={key:1},Ee={__name:"RegisterView",setup(Se){const h=O(),E=L(),x=f(!0),w=f(!1),y=f(!1),c=f(""),b=f(null),U=f([]),X=f([]),s=R({name:"",gender:"",email:"",phone:"",stage:"",study_type:"",department_id:"",interests:[],description:""}),l=R({}),I=H(()=>s.department_id?X.value.filter(n=>n.department_id===s.department_id):[]);N(()=>s.department_id,()=>{s.interests=[]}),B(async()=>{try{const{data:n}=await J(h.params.formId);b.value=n.form,U.value=n.departments,X.value=n.interests}catch{w.value=!0}finally{x.value=!1}});function S(){Object.keys(l).forEach(e=>delete l[e]);let n=!0;return(!s.name.trim()||s.name.trim().split(" ").length<2)&&(l.name="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ ÙƒØ§Ù…Ù„Ø§Ù‹.",n=!1),s.gender||(l.gender="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ù†Ø³.",n=!1),s.study_type||(l.study_type="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯Ø±Ø§Ø³Ø©.",n=!1),s.stage||(l.stage="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø±Ø­Ù„Ø©.",n=!1),s.department_id||(l.department_id="ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù….",n=!1),!s.email&&!s.phone&&(l.contact="ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.",n=!1),n}async function j(){var n,e,v,g;if(S()){y.value=!0,c.value="";try{const o={...s,stage:Number(s.stage)},{data:m}=await K(h.params.formId,o);E.push({name:"RegisterSuccess",params:{formId:h.params.formId},query:{name:m.student.name,qr:m.qr_token}})}catch(o){const m=(e=(n=o.response)==null?void 0:n.data)==null?void 0:e.errors;m?Object.entries(m).forEach(([q,C])=>{l[q]=C[0]}):c.value=((g=(v=o.response)==null?void 0:v.data)==null?void 0:g.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¬Ø¯Ø¯Ø§Ù‹."}finally{y.value=!1}}}return(n,e)=>(a(),r("div",P,[t("div",Q,[x.value?(a(),r("div",W,[...e[12]||(e[12]=[t("div",{class:"spinner",style:{width:"48px",height:"48px","border-width":"4px"}},null,-1),t("p",{style:{"margin-top":"1rem",color:"var(--text-2)"}},"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©...",-1)])])):w.value?(a(),r("div",Y,[...e[13]||(e[13]=[t("div",{style:{"font-size":"4rem"}},"âš ï¸",-1),t("h2",{style:{"margin-top":"1rem"}},"Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø©",-1),t("p",{style:{color:"var(--text-2)","margin-top":"0.5rem"}},"Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ù…ØºÙ„Ù‚Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø·Ù‡Ø§ ØºÙŠØ± ØµØ­ÙŠØ­.",-1)])])):i("",!0),T(D,{name:"slide-up",appear:""},{default:$(()=>{var v,g;return[!x.value&&!w.value?(a(),r("div",Z,[t("div",ee,[e[14]||(e[14]=t("div",{class:"reg-logo"},[t("img",{src:"/logo.png",alt:"Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø±ÙƒØ²",style:{width:"100%",height:"100%","object-fit":"contain","border-radius":"50%","box-shadow":"0 4px 15px rgba(0,0,0,0.1)"},onerror:"this.style.display='none'"})],-1)),e[15]||(e[15]=t("h1",{class:"gradient-text",style:{"font-size":"2rem","margin-bottom":"0.2rem","line-height":"1.4"}},"Ù…Ø±ÙƒØ² Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù…Ø³ØªÙ…Ø±",-1)),e[16]||(e[16]=t("h2",{style:{"font-size":"1.2rem",color:"var(--text-2)","margin-bottom":"0.5rem"}},"Ù‡Ù†Ø¯Ø³Ø© ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨",-1)),t("h3",te,d((v=b.value)==null?void 0:v.title),1),(g=b.value)!=null&&g.description?(a(),r("p",se,d(b.value.description),1)):i("",!0),e[17]||(e[17]=t("div",{class:"reg-divider"},null,-1))]),t("form",{onSubmit:A(j,["prevent"]),novalidate:""},[t("div",oe,[t("div",le,[e[18]||(e[18]=t("label",{class:"form-label"},"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ *",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),type:"text",class:p(["form-input",{error:l.name}]),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„"},null,2),[[_,s.name]]),l.name?(a(),r("span",re,d(l.name),1)):i("",!0)]),t("div",ae,[e[21]||(e[21]=t("label",{class:"form-label"},"Ø§Ù„Ø¬Ù†Ø³ *",-1)),t("div",ne,[t("label",{class:p(["gender-option",{active:s.gender==="male"}])},[u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.gender=o),type:"radio",value:"male",hidden:""},null,512),[[k,s.gender]]),e[19]||(e[19]=t("span",null,"ğŸ‘¨ Ø°ÙƒØ±",-1))],2),t("label",{class:p(["gender-option",{active:s.gender==="female"}])},[u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.gender=o),type:"radio",value:"female",hidden:""},null,512),[[k,s.gender]]),e[20]||(e[20]=t("span",null,"ğŸ‘© Ø£Ù†Ø«Ù‰",-1))],2)]),l.gender?(a(),r("span",ie,d(l.gender),1)):i("",!0)]),t("div",de,[e[24]||(e[24]=t("label",{class:"form-label"},"Ø§Ù„Ø¯Ø±Ø§Ø³Ø© *",-1)),t("div",ue,[t("label",{class:p(["gender-option",{active:s.study_type==="morning"}])},[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.study_type=o),type:"radio",value:"morning",hidden:""},null,512),[[k,s.study_type]]),e[22]||(e[22]=t("span",null,"â˜€ï¸ ØµØ¨Ø§Ø­ÙŠ",-1))],2),t("label",{class:p(["gender-option",{active:s.study_type==="evening"}])},[u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.study_type=o),type:"radio",value:"evening",hidden:""},null,512),[[k,s.study_type]]),e[23]||(e[23]=t("span",null,"ğŸŒ™ Ù…Ø³Ø§Ø¦ÙŠ",-1))],2)]),l.study_type?(a(),r("span",pe,d(l.study_type),1)):i("",!0)]),t("div",me,[e[26]||(e[26]=t("label",{class:"form-label"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *",-1)),u(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.stage=o),class:p(["form-select",{error:l.stage}])},[...e[25]||(e[25]=[t("option",{value:"",disabled:""},"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©",-1),t("option",{value:"1"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",-1),t("option",{value:"2"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",-1),t("option",{value:"3"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©",-1),t("option",{value:"4"},"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©",-1)])],2),[[z,s.stage]]),l.stage?(a(),r("span",fe,d(l.stage),1)):i("",!0)]),t("div",ve,[e[28]||(e[28]=t("label",{class:"form-label"},"Ø§Ù„Ù‚Ø³Ù… *",-1)),u(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.department_id=o),class:p(["form-select",{error:l.department_id}])},[e[27]||(e[27]=t("option",{value:"",disabled:""},"Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…",-1)),(a(!0),r(V,null,M(U.value,o=>(a(),r("option",{key:o.id,value:o.id},d(o.name),9,ge))),128))],2),[[z,s.department_id]]),l.department_id?(a(),r("span",ye,d(l.department_id),1)):i("",!0)]),t("div",ce,[e[29]||(e[29]=t("label",{class:"form-label"},"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.email=o),type:"email",class:p(["form-input",{error:l.contact}]),placeholder:"example@email.com"},null,2),[[_,s.email]])]),t("div",be,[e[30]||(e[30]=t("label",{class:"form-label"},"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",-1)),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.phone=o),type:"tel",class:p(["form-input",{error:l.contact}]),onInput:e[9]||(e[9]=o=>s.phone=s.phone.replace(/[^0-9]/g,"")),placeholder:"07XXXXXXXXX"},null,34),[[_,s.phone]]),l.contact?(a(),r("span",_e,d(l.contact),1)):i("",!0)]),s.department_id&&I.value.length?(a(),r("div",ke,[e[31]||(e[31]=t("label",{class:"form-label"},"Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª",-1)),t("div",he,[(a(!0),r(V,null,M(I.value,o=>(a(),r(V,{key:o.id},[u(t("input",{type:"checkbox",class:"pill-item",id:`int-${o.id}`,value:o.id,"onUpdate:modelValue":e[10]||(e[10]=m=>s.interests=m)},null,8,xe),[[G,s.interests]]),t("label",{for:`int-${o.id}`,class:"pill-label"},d(o.name),9,we)],64))),128))])])):i("",!0),t("div",Ve,[e[32]||(e[32]=t("label",{class:"form-label"},"ØªØ­Ø¯Ø« Ø¹Ù† Ù†ÙØ³Ùƒ",-1)),u(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.description=o),class:"form-textarea",placeholder:"Ø£Ø®Ø¨Ø±Ù†Ø§ Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù† Ù†ÙØ³ÙƒØŒ Ø®Ø¨Ø±Ø§ØªÙƒØŒ Ø£Ù‡Ø¯Ø§ÙÙƒ..."},null,512),[[_,s.description]])]),c.value?(a(),r("div",Ue,[t("div",Xe,d(c.value),1)])):i("",!0),t("div",Ie,[t("button",{type:"submit",class:"btn btn-primary btn-full",disabled:y.value,style:{padding:"1rem","font-size":"1.1rem"}},[y.value?(a(),r("span",Me)):(a(),r("span",Re,"âœ¨ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©"))],8,ze)])])],32)])):i("",!0)]}),_:1})])]))}},Ce=F(Ee,[["__scopeId","data-v-e218a893"]]);export{Ce as default};
