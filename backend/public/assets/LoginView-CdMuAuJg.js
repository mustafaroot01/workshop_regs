import{_ as v,c as l,a as s,d as f,e as c,T as y,f as w,g as r,h as _,i as p,v as u,t as x,b as k,r as n}from"./index-ItZyAqaB.js";import{a as h}from"./api-Cwew99rJ.js";const V={class:"page login-page"},S={class:"login-card card"},I={class:"form-group",style:{"margin-bottom":"1rem"}},B={class:"form-group",style:{"margin-bottom":"1.5rem"}},D={key:0,class:"alert alert-error",style:{"margin-bottom":"1rem"}},L=["disabled"],N={key:0,class:"spinner"},T={key:1},z={__name:"LoginView",setup(C){const g=w(),i=n("admin@workshop.com"),d=n(""),t=n(""),a=n(!1);async function b(){var m,e;a.value=!0,t.value="";try{const{data:o}=await h({email:i.value,password:d.value});localStorage.setItem("admin_token",o.token),localStorage.setItem("admin_name",o.user.name),localStorage.setItem("admin_role",o.user.role),g.push({name:"AdminDashboard"})}catch(o){t.value=((e=(m=o.response)==null?void 0:m.data)==null?void 0:e.message)||"فشل تسجيل الدخول."}finally{a.value=!1}}return(m,e)=>(r(),l("div",V,[e[8]||(e[8]=s("div",{class:"orb orb-1"},null,-1)),e[9]||(e[9]=s("div",{class:"orb orb-2"},null,-1)),f(y,{name:"slide-up",appear:""},{default:c(()=>[s("div",S,[e[4]||(e[4]=s("div",{class:"login-logo"},[s("img",{src:"/logo.png",alt:"شعار المركز",style:{width:"70px",height:"70px","object-fit":"contain","border-radius":"50%","box-shadow":"0 4px 15px rgba(0,0,0,0.2)"},onerror:"this.style.display='none'"})],-1)),e[5]||(e[5]=s("h2",{class:"gradient-text",style:{"font-size":"1.8rem","margin-bottom":"0.2rem"}},"مركز التعليم المستمر",-1)),e[6]||(e[6]=s("h3",{style:{color:"#b0d4f5","font-size":"1.1rem","margin-bottom":"0.5rem"}},"هندسة تقنيات الحاسوب",-1)),e[7]||(e[7]=s("p",{class:"hint"},"لوحة تحكم المشرف",-1)),s("form",{onSubmit:_(b,["prevent"]),style:{"margin-top":"1.5rem"}},[s("div",I,[e[2]||(e[2]=s("label",{class:"form-label"},"البريد الإلكتروني",-1)),p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),type:"email",class:"form-input",placeholder:"admin@workshop.com",autofocus:""},null,512),[[u,i.value]])]),s("div",B,[e[3]||(e[3]=s("label",{class:"form-label"},"كلمة المرور",-1)),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),type:"password",class:"form-input",placeholder:"••••••••"},null,512),[[u,d.value]])]),t.value?(r(),l("div",D,x(t.value),1)):k("",!0),s("button",{type:"submit",class:"btn btn-primary btn-full",disabled:a.value,style:{padding:"0.85rem"}},[a.value?(r(),l("span",N)):(r(),l("span",T,"دخول →"))],8,L)],32)])]),_:1})]))}},j=v(z,[["__scopeId","data-v-bd2a052c"]]);export{j as default};
