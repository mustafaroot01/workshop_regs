import{c as p}from"./api-Cwew99rJ.js";import{_,o as u,c as a,a as t,t as o,s as l,d as g,e as y,F as b,l as f,r as m,q as x,z as h,g as r}from"./index-ItZyAqaB.js";const k={key:0,style:{"text-align":"center",padding:"4rem"}},w={key:1},z={class:"dashboard-grid"},V={class:"stat-card card"},F={class:"stat-info"},B={class:"stat-val"},D={style:{"font-size":"0.75rem",color:"var(--text-3)","margin-top":"4px"}},N={style:{color:"var(--success)"}},S={class:"stat-card card"},C={class:"stat-info"},I={class:"stat-val"},M={class:"stat-card card"},j={class:"stat-info"},q={class:"stat-val"},A={style:{"font-size":"0.75rem",color:"var(--text-3)","margin-top":"4px"}},E={style:{color:"var(--primary)"}},L={class:"stat-card card"},O={class:"stat-info"},R={class:"stat-val"},T={class:"card",style:{"margin-top":"2rem"}},G={style:{"margin-bottom":"1.5rem",display:"flex","justify-content":"space-between","align-items":"center"}},H={key:0,style:{width:"100%","text-align":"right","border-collapse":"collapse"}},J={style:{padding:"0.8rem 0.5rem","font-weight":"600",color:"var(--text-1)"}},K={style:{padding:"0.8rem 0.5rem",color:"var(--text-2)","font-size":"0.9rem"}},P={style:{padding:"0.8rem 0.5rem",color:"var(--text-2)","font-size":"0.9rem"}},Q={style:{padding:"0.8rem 0.5rem",color:"var(--text-3)","font-size":"0.85rem","font-family":"monospace"},dir:"ltr"},U={key:1,style:{"text-align":"center",padding:"2rem",color:"var(--text-3)"}},W={__name:"DashboardView",setup(X){const i=m(!0),e=m(null),c=x(()=>!e.value||e.value.metrics.total_students===0?0:Math.round(e.value.metrics.total_present/e.value.metrics.total_students*100));return u(async()=>{if(localStorage.getItem("admin_role")!=="admin"){window.location.href="/admin/forms";return}try{const{data:d}=await p();e.value=d}catch(d){console.error("Failed to load dashboard stats",d)}finally{i.value=!1}}),(d,s)=>{const v=h("router-link");return r(),a("div",null,[s[16]||(s[16]=t("div",{style:{"margin-bottom":"2rem"}},[t("h2",{class:"gradient-text"},"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"),t("p",{style:{color:"var(--text-3)","font-size":"0.9rem","margin-top":"0.3rem"}}," Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ")],-1)),i.value?(r(),a("div",k,[...s[0]||(s[0]=[t("div",{class:"spinner",style:{width:"40px",height:"40px","border-width":"3px"}},null,-1)])])):(r(),a("div",w,[t("div",z,[t("div",V,[s[4]||(s[4]=t("div",{class:"stat-icon",style:{background:"rgba(0, 124, 237, 0.1)",color:"#007ced"}},"ðŸ“‹",-1)),t("div",F,[t("span",B,o(e.value.metrics.total_forms),1),s[3]||(s[3]=t("span",{class:"stat-lbl"},"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª",-1)),t("div",D,[s[1]||(s[1]=l(" Ù…Ù†Ù‡Ø§ ",-1)),t("b",N,o(e.value.metrics.open_forms),1),s[2]||(s[2]=l(" Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ø¢Ù† ",-1))])])]),t("div",S,[s[6]||(s[6]=t("div",{class:"stat-icon",style:{background:"rgba(124, 58, 237, 0.1)",color:"#7c3aed"}},"ðŸ‘¥",-1)),t("div",C,[t("span",I,o(e.value.metrics.total_students),1),s[5]||(s[5]=t("span",{class:"stat-lbl"},"Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†",-1))])]),t("div",M,[s[9]||(s[9]=t("div",{class:"stat-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"}},"âœ…",-1)),t("div",j,[t("span",q,o(e.value.metrics.total_present),1),s[8]||(s[8]=t("span",{class:"stat-lbl"},"Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ø­Ø¶ÙˆØ±Ù‡Ù…",-1)),t("div",A,[s[7]||(s[7]=l(" Ø¨Ù†Ø³Ø¨Ø© Ø­Ø¶ÙˆØ± Ø¹Ø§Ù…Ø© ",-1)),t("b",E,o(c.value)+"%",1)])])]),t("div",L,[s[11]||(s[11]=t("div",{class:"stat-icon",style:{background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b"}},"ðŸ›ï¸",-1)),t("div",O,[t("span",R,o(e.value.metrics.departments_count),1),s[10]||(s[10]=t("span",{class:"stat-lbl"},"Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¹Ù„Ù…ÙŠØ©",-1))])])]),t("div",T,[t("div",G,[s[13]||(s[13]=t("h3",{style:{"font-size":"1.1rem",color:"var(--text-1)"}},"Ø£Ø­Ø¯Ø« Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª",-1)),g(v,{to:{name:"AdminForms"},class:"btn btn-ghost",style:{"font-size":"0.85rem",padding:"0.3rem 0.6rem"}},{default:y(()=>[...s[12]||(s[12]=[l(" Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª â†— ",-1)])]),_:1})]),e.value.recent_students.length>0?(r(),a("table",H,[s[15]||(s[15]=t("thead",null,[t("tr",{style:{"border-bottom":"1px solid var(--border)",color:"var(--text-3)","font-size":"0.85rem"}},[t("th",{style:{padding:"0.5rem"}},"Ø§Ù„Ø§Ø³Ù…"),t("th",{style:{padding:"0.5rem"}},"Ø§Ù„Ù‚Ø³Ù… / Ø§Ù„Ù…Ø±Ø­Ù„Ø©"),t("th",{style:{padding:"0.5rem"}},"Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©"),t("th",{style:{padding:"0.5rem"}},"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„")])],-1)),t("tbody",null,[(r(!0),a(b,null,f(e.value.recent_students,n=>(r(),a("tr",{key:n.id,style:{"border-bottom":"1px solid rgba(255,255,255,0.03)"}},[t("td",J,o(n.name),1),t("td",K,[l(o(n.department)+" ",1),s[14]||(s[14]=t("span",{style:{opacity:"0.5"}},"-",-1)),l(" Ù…"+o(n.stage),1)]),t("td",P,o(n.form_title),1),t("td",Q,o(n.registered_at),1)]))),128))])])):(r(),a("div",U," Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙŠ ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. "))])]))])}}},$=_(W,[["__scopeId","data-v-17b388e6"]]);export{$ as default};
